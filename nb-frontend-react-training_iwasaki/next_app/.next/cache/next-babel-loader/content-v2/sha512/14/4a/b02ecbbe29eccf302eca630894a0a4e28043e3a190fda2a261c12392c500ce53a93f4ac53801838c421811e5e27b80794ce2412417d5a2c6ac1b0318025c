{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/uu189280/repositorys/nb-frontend-react-training_iwasaki/next_app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from 'react';\nimport usePersist from './Persist';\nexport default function Calc(props) {\n  var _useState = useState(''),\n      massage = _useState[0],\n      setMessage = _useState[1];\n\n  var _useState2 = useState(''),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _usePersist = usePersist('calc-history', []),\n      _usePersist2 = _slicedToArray(_usePersist, 2),\n      data = _usePersist2[0],\n      setData = _usePersist2[1];\n\n  var _useState3 = useState({\n    func: {}\n  }),\n      func = _useState3[0],\n      setFunc = _useState3[1];\n\n  var fetchFunc = function fetchFunc(address) {\n    return fetch(address).then(function (res) {\n      return res.json();\n    });\n  };\n\n  useEffect(function () {\n    fetchFunc('/api/func').then(function (r) {\n      setFunc(r);\n    });\n  }, [data]);\n\n  var onChange = function onChange(e) {\n    setInput(e.target.value);\n  };\n\n  var onKeyPress = function onKeyPress(e) {\n    if (e.key == 'Enter') {\n      doAction(e);\n    }\n  }; //Enter時の処理\n\n\n  var doAction = function doAction(e) {\n    var res = eval(input);\n    setMessage(res);\n    data.unshift(input + ' = ' + res);\n    setData(data);\n    setInput('');\n  }; //履歴のクリア\n\n\n  var clear = function clear(e) {\n    setData([]);\n    setMessage('Clear history');\n  }; //関数ボタンの処理\n\n\n  var doFunc = function doFunc(e) {\n    var arr = input.split(',');\n    var fid = e.target.id;\n    var f = func.func[fid];\n    var fe = eval(f[\"function\"]);\n    var res = fe(arr);\n    setMessage(res);\n    data.unshift(fid + ' = ' + res);\n    setData(data);\n    setInput('');\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"alert alert-primary\",\n      children: [/*#__PURE__*/_jsxs(\"h5\", {\n        children: [\"Result: \", message]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          value: input,\n          className: \"form-control\",\n          onChange: onChange,\n          onKeyPress: onKeyPress\n        })\n      }), Object.entries(func.func).map(function (value, key) {\n        return /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-secoundary m-1\",\n          title: value[1].caption,\n          id: value[0],\n          onClick: doFunc,\n          children: value[0]\n        }, key);\n      })]\n    }), /*#__PURE__*/_jsxs(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsx(\"tr\", {\n          children: /*#__PURE__*/_jsx(\"th\", {\n            children: \"Histroy:\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: data.map(function (value, key) {\n          return /*#__PURE__*/_jsx(\"tr\", {\n            children: /*#__PURE__*/_jsx(\"td\", {\n              children: value\n            })\n          }, key);\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"button\", {\n      onClick: clear,\n      className: \"btn btn-warning\",\n      children: \"Clear Histroy\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}